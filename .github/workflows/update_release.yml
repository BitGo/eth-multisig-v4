name: Update Release Notes
on:
 release:
jobs:
  build-and-release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Update release notes
        uses: actions/github-script@v6
        with:
          github-token: ${{secrets.GITHUB_TOKEN}}
          script: |
              const fs = require('fs');
              const path = require('path');
              var json;
              var html = "";
              try {
                json = JSON.parse(fs.readFileSync('./releasenotes.json').toString());
                for(const coin in json){
                  html += "<h1>"+coin+"</h1>";
                  html += "wallet: "+json[coin].wallet+"<br>";
                  html += "scan: "+json[coin].etherscan+"<br>";
                }
              } catch (err){
                console.log("json file not found.");
              }
              const response= await github.rest.repos.getReleaseByTag({
                owner: context.repo.owner,
                repo: context.repo.repo,
                tag: "${{ github.event.release.tag_name }}"
              });
              github.rest.repos.updateRelease({
                owner: context.repo.owner,
                repo: context.repo.repo,
                release_id: response.data.id,
                body: html
              });
